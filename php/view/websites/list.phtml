<?php require_once __DIR__ . "/../layout/head.inc.phtml"; ?>

<?php require_once __DIR__ . "/../layout/header.inc.phtml"; ?>

	<!-- Begin page content -->
	<main role="main" class="container-fluid">
		<h2>Websites list (<?= count($vhosts) ?>)</h2>
	<table class="table table-sm table-bordered table-hover">
		<thead class="table-dark">
			<tr>
				<th>id</th>
				<th>FQDN</th>
				<th>serveur</th>
				<th>SSH login</th>
			</tr>
		</thead>
		<tbody>
			<?php
			foreach ($vhosts as $vhost) {
				$server_config = $servers_configs [$vhost ["server_id"]] ?? null;
				$hostname = $server_config ["server"] ["hostname"] ?? "";
				$shell_users_str = implode(PHP_EOL, array_column($shell_users [$vhost ["domain_id"]] ?? [], "username"));
				?>
				<tr>
					<td><?= $vhost ["domain_id"] ?></td>
					<td><a href="http://<?=$vhost ["domain"]?>" target="_blank"><?= $vhost ["domain"] ?></a></td>
					<td><?= $hostname ?></td>
					<td><?= nl2br($shell_users_str)?></td>
				</tr>
				<?php
			}
			?>
			</tbody>
			<thead class="table-dark">
				<tr>
					<th>&nbsp;</th>
					<th>&nbsp;</th>
					<th>&nbsp;</th>
					<th>&nbsp;</th>
				</tr>
			</thead>
	</table>
	</main>

<?php require_once __DIR__ . "/../layout/footer.inc.phtml"; ?>

<?php require_once __DIR__ . "/../layout/foot.inc.phtml"; ?>
